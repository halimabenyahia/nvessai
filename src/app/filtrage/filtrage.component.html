<div style="margin-top: 2%">
    <div class="container">
        <div class="card">
            <div class="card-body">
                <h5 style="color:gray">Liste des depenses en TTC </h5>
                <form #form="ngForm">
                    <div class="row">
                        <div class="form-group col-md-3 ">
                            <label for="immatriculation">Véhicule</label>
                            <input type="text" class="form-control" #inputImmatricul ngModel name='immatriculation' (keyup)="chercherVehicule(inputImmatricul.value)" [(ngModel)]="selectedVehicule">
                            <input type="text" hidden name='id_vehicule' [(ngModel)]="idSelectedVehicule" ngModel>
                            <ol class="list-group" #listSelectedVehicule>
                                <li class="list-group-item" (click)="selectVehicule(vehicule)" *ngFor="let vehicule of vehicules" value="{{vehicule?.id_vehicule}}">
                                    {{vehicule?.immatriculation}}
                                </li>
                            </ol>
                        </div>
                        <div class="form-group col-sm-3">
                            <label for="type_depense">Type de dépense:</label>
                            <input type="text" class="form-control" #typedepense ngModel name='type_depense' pattern='[a-zA-Z ]+'>

                        </div>
                        <div class="form-group col-sm-3">
                            <button type="button" (click)="chercher(form.value)" class="btn btn-info" data-toggle="modal" data-target=".bd-example-modal-lg">
                            <i class="fa fa-search"></i> 
                        </button>
                        </div>
                    </div>
                </form>
                <br>
                <table class="table">
                    <thead class="thead-light">
                        <th>immatriculation </th>
                        <th>janvier</th>
                        <th>fevrier</th>
                        <th>mars</th>
                        <th>avril</th>
                        <th>mai</th>
                        <th>juin</th>
                        <th>juillet</th>
                        <th>aout</th>
                        <th>septembre</th>
                        <th>octobre</th>
                        <th>novembre</th>
                        <th>decembre</th>
                        <th></th>
                        <th></th>
                    </thead>
                    <tbody>
                        <tr *ngFor="let depense of depenseResponses ;let i=index">
                            <th>{{depense?.immatriculation}}</th>
                            <td>{{depense?.dep_janvier | number }}</td>
                            <td>{{depense?.dep_fevrier | number }}</td>
                            <td>{{depense?.dep_mars | number }}</td>
                            <td>{{depense?.dep_avril | number }}</td>
                            <td>{{depense?.dep_mai | number }}</td>
                            <td>{{depense?.dep_juin | number }}</td>
                            <td>{{depense?.dep_juillet | number }}</td>
                            <td>{{depense?.dep_aout | number }}</td>
                            <td>{{depense?.dep_septembre | number }}</td>
                            <td>{{depense?.dep_octobre | number }}</td>
                            <td>{{depense?.dep_novembre | number }}</td>
                            <td>{{depense?.dep_decembre | number }}</td>
                            <td>
                                <button (click)=showModal(depense,i) type="button" class="btn btn-info" data-toggle="modal" data-target=".bd-example-modal-lg">
                                   <i class="fa fa-signal"></i> 
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade bd-example-modal-lg" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" [ngClass]="{show: show}" [ngStyle]="{'display' : displayValue } ">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Analyse des dépenses en TTC</h5>
                <button (click)="closeModalDialog()" type="button" class="close" [ngClass]="{show: show}" [ngStyle]="{'display' : displayy } " data-dismiss="modal" aria-label="Close">
          <i class="fa fa-times"></i>
        </button>
            </div>
            <div class="modal-body">
                <div class="chartjs-wrapper">
                    <canvas id="canvas" class="chartjs"> {{chart}}</canvas>
                </div>
            </div>
        </div>
    </div>
</div>